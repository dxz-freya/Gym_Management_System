@{
    Layout = "../Shared/_AdminLayout.cshtml";
    ViewData["Title"] = "Dashboard";
}

<style>
    .dashboard-card {
        padding: 1.25rem;
        border-radius: 0.75rem;
        box-shadow: 0 2px 6px rgba(0, 0, 0, 0.08);
        transition: transform 0.2s ease-in-out;
        min-height: 120px;
    }

    .dashboard-card:hover {
        transform: translateY(-3px);
    }

    .dashboard-title {
        font-size: 1.1rem;
        font-weight: 600;
        margin-bottom: 0.3rem;
    }

    .dashboard-number {
        font-size: 2.2rem;
        font-weight: 800;
    }
</style>

<!-- Summary Cards -->
<div class="row mb-4">
    <div class="col-md-4">
        <div class="bg-dark text-white dashboard-card text-center">
            <div class="dashboard-title">Total Sessions</div>
            <div id="totalSessions" class="dashboard-number">0</div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="bg-primary text-white dashboard-card text-center">
            <div class="dashboard-title">Total Members</div>
            <div id="totalMembers" class="dashboard-number">0</div>
        </div>
    </div>
    <div class="col-md-4">
        <div class="bg-dark text-white dashboard-card text-center">
            <div class="dashboard-title">Total Trainers</div>
            <div id="totalTrainers" class="dashboard-number">0</div>
        </div>
    </div>
</div>

<!-- Session Tables -->
@for (int day = 0; day < 3; day++)
{
    var sessionDate = DateTime.Today.AddDays(day);
    var label = day == 0 ? "Today's sessions" : day == 1 ? "Tomorrow's sessions" : $"Sessions ({sessionDate:MMM dd, yyyy})";

    <div class="card p-4 mb-4">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h5 class="fw-bold text-success">@label (@sessionDate:MMM dd, yyyy)</h5>
            <a asp-action="ManageSessions" asp-controller="Admin" class="btn btn-outline-secondary btn-sm">+ Create a
                session</a>
        </div>
        <div class="table-responsive">
            <table class="table table-bordered bg-white text-center align-middle">
                <thead class="table-light">
                    <tr>
                        <th>Session</th>
                        <th>Time</th>
                        <th>Trainer</th>
                        <th>Branch</th>
                        <th>Room</th>
                        <th>Capacity</th>
                        <th>Bookings</th>
                        <th>Attendance</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>Power Yoga</td>
                        <td>09:15 | @sessionDate:MMM dd, yyyy</td>
                        <td>Jasmine Lee</td>
                        <td>Metro Branch</td>
                        <td>Room 201</td>
                        <td>40</td>
                        <td>2</td>
                        <td>1</td>
                    </tr>
                    <tr>
                        <td>Core Crusher</td>
                        <td>12:30 | @sessionDate:MMM dd, yyyy</td>
                        <td>Chris Rivera</td>
                        <td>Metro Branch</td>
                        <td>Room 206</td>
                        <td>40</td>
                        <td>28</td>
                        <td>20</td>
                    </tr>
                    <tr>
                        <td>Full Body Burn</td>
                        <td>20:00 | @sessionDate:MMM dd, yyyy</td>
                        <td>Chris Rivera</td>
                        <td>Metro Branch</td>
                        <td>Room 206</td>
                        <td>40</td>
                        <td>39</td>
                        <td>30</td>
                    </tr>
                    <tr>
                        <td>Spin & Sweat</td>
                        <td>17:00 | @sessionDate:MMM dd, yyyy</td>
                        <td>Tyler Brooks</td>
                        <td>Metro Branch</td>
                        <td>Room 204</td>
                        <td>40</td>
                        <td>28</td>
                        <td>28</td>
                    </tr>
                </tbody>
            </table>
        </div>
    </div>
}

@section Scripts {
    <script src="https://cdnjs.cloudflare.com/ajax/libs/countup.js/1.9.3/countUp.min.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function () {
            var options = {
                useEasing: true,
                useGrouping: true,
                separator: ',',
                decimal: '.'
            };

            var count1 = new CountUp('totalSessions', 0, 772, 0, 2.0, options);
            var count2 = new CountUp('totalMembers', 0, 525, 0, 2.0, options);
            var count3 = new CountUp('totalTrainers', 0, 6, 0, 2.0, options);

            if (!count1.error) count1.start(); else console.error(count1.error);
            if (!count2.error) count2.start(); else console.error(count2.error);
            if (!count3.error) count3.start(); else console.error(count3.error);
        });
    </script>


}