@model GymManagement.ViewModels.MembershipViewModel
@{
    ViewData["Title"] = "My Membership";
    Layout = "~/Views/Shared/_Layout.cshtml";
}

<section class="breadcrumb-section set-bg" data-setbg="@Url.Content("~/img/breadcrumb-bg.jpg")" style="background-image: url('@Url.Content("~/img/breadcrumb-bg.jpg")');">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 text-center">
                <div class="breadcrumb-text">
                    <h2>Membership Info</h2>
                    <div class="bt-option">
                        <a asp-controller="Home" asp-action="Index">Home</a>
                        <span>Membership</span>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section class="services-section spad">
    <div class="container">
        @if (TempData["Toast"] != null)
        {
            <div class="alert alert-success text-center">@TempData["Toast"]</div>
        }

        <div class="text-center mb-5">
            <h2 class="text-warning font-weight-bold mb-3">@Model.Name</h2>

            <p>Membership Type: <strong>@Model.MembershipType</strong></p>

            <p>
                Status:
                <span class="badge badge-@(Model.MembershipStatus == "Active" ? "success" :
                                           Model.MembershipStatus == "Expired" ? "danger" :
                                           "secondary")">
                    @Model.MembershipStatus
                </span>
            </p>

            <p>
                Expires On:
                <strong>@Model.ExpiryDate?.ToString("yyyy-MM-dd")</strong>
            </p>

            <p>
                Remaining Days:
                <strong class="text-info">@Model.RemainingDays</strong>
            </p>

            @if (Model.MembershipStatus == "Expired")
            {
                <form asp-action="RenewMembership" method="post" class="mt-4">
                    <div class="form-group">
                        <label class="font-weight-bold">Select a Plan:</label>
                        <select name="plan" class="form-control w-25 mx-auto">
                            <option value="Monthly">Monthly (+1 month)</option>
                            <option value="Quarterly">Quarterly (+3 months)</option>
                            <option value="Yearly">Yearly (+12 months)</option>
                        </select>
                    </div>
                    <button type="submit" class="btn btn-success px-4">Renew Now</button>
                </form>
            }
        </div>

        <h4 class="text-center mb-3 text-light">Payment History</h4>
        <table class="table table-bordered table-striped text-center bg-white">
            <thead class="thead-dark">
                <tr>
                    <th>Amount</th>
                    <th>Payment Method</th>
                    <th>Date</th>
                </tr>
            </thead>
            <tbody>
                @foreach (var p in Model.Payments)
                {
                    <tr>
                        <td>$@p.Price</td>
                        <td>@p.PaymentMethod</td>
                        <td>@p.PaymentDate.ToString("yyyy-MM-dd")</td>
                    </tr>
                }
            </tbody>
        </table>
    </div>
</section>
